---
title: "计算机网络"
date: 2020-10-22T23:56:59+08:00
---

## 计算机网络

### 一开始的思想

1. 转发 
2. 标识

通过hub集线器转发

一台计算机发送消息给hub，hub无条件发送给其它设备

其它计算机通过标识，该标识代表着该信息是否是发给我的

但是存在一个，其中一台设备并不是想接受信息，于是提出了一种协议csma/cd

### csma/cd

在发送前进行载波侦听

在其它设备发送数据的时候，自己不发，避免冲突

缺点：在链路上只有一个发送设备，发送数据无效


### 交换机sw

实现数据的转发，在交换机记录计算机的地址与映射关系mac地址

mac地址是设备出厂写死的，唯一的

交换机存在一个表

mac1 代表1号机器
mac2 代表2号机器
mac3 代表3号机器

这样不需要将数据广播的形式发送

全双工，一台机器既可以发送数据，也可以接受数据

所在数据链路层

包含：数据头

数据头包含mac地址

以上适合局部的设备，局域网内效率很高，但是大网络下不行

### 路由器/网关

在不同网路的设备，通过路由器进行转发

2个局域网(网络)以上可以用路由器

这里就有了ip地址

ip地址是该设备在哪个网络下

不同的网络(ip地址)之所以可以ping通，是因为路由器

一个网络既有对内的ip还有对外的ip

192.168.1.52到192.168.1.254的通信过程

52去查254的mac地址 走的arp协议

一个数据包包括:

头部为mac，数据包包含ip头，数据

往上是tcp的头部，再往上是http的头

先找到ip地址，然后是mac地址

传输层包含tcp，udp这样的协议

tcp保证数据的可靠性

再往上http，是应用层

### 五层

应用层
表现层
会话层

传输层

网络层

数据链路层

物理层

### http协议

1991年

http0.9

规定使用get方式获取文件

没有请求头这些

1996年

http1.0

规定了请求头+请求体

响应头+响应体

方法包含get与post

存在一个问题，每一个单独的请求都是和服务器都建立链接

http1.1

请求头添加connction:keep-alive

在请求一个数据后，http链接短期不会关闭

避免链接的频繁建立与关闭

http1.1中规定

可以向服务器建立多个链接

并行的发送请求，但是并行是有上线的

chrome上最多是6个


在以上中,http一直采用明文传输，信息没有压缩，传输效率过低

必须加载一个请求，才能加载第二个请求

```
乱序块传输为什么快？

1234四块传输，如果是顺序，1失败就必须重新传输1，2必须等1完成才可以
```

http存在传输的问题

1.0 中的header非常长，如何压缩

server端无法进行主动的push

2015年提出2.0

不适用明文传输，使用二进制传输

将响应的内容打散成帧的形式，单个链接

头部压缩

服务端可以实现主动push(单个请求，多个返回)

2019年，http3.0出现

基于tcp的形式变为基于udp

目前想使用2.0，必须用https

TCP和UDP的区别
tcp连接就像打电话，两者之间必须有一条不间断的通路，数据不到达对方，对方
就一直在等待，除非对方直接挂电话。先说的话先到，后说的话后到，有顺序。

udp就象寄一封信，发信者只管发，不管到。但是你的信封上必须写明对方的地址。
发信者和收信者之间没有通路，靠邮电局联系。信发到时可能已经过了很久，也可
能根本没有发到。先发的信未必先到，后发的也未必后到。

TCP---传输控制协议,提供的是面向连接、可靠的字节流服务。当客户和服务器彼此交换数据前，必须先在双方之间建立一个TCP连接，之后才能传输数据。TCP提供超时重发，丢弃重复数据，检验数据，流量控制等功能，保证数据能从一端传到另一端。
UDP---用户数据报协议，是一个简单的面向数据报的运输层协议。UDP不提供可靠性，它只是把应用程序传给IP层的数据报发送出去，但是并不能保证它们能到达目的地。由于UDP在传输数据报前不用在客户和服务器之间建立一个连接，且没有超时重发等机制，故而传输速度很快。

![](https://upload-images.jianshu.io/upload_images/2964446-1fd7a0f3216c0530.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/284)

https://zhuanlan.zhihu.com/p/134218432

https://zhuanlan.zhihu.com/p/138571894